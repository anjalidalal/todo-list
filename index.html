<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TODO LIST</title>
    <style>
      body {
        background: linear-gradient(
          to right bottom,
          #0066ffe1 0%,
          #99ffcc 100%
        );
        height: 95vh;
      }

      .input-box {
        width: 650px;
        margin: auto;
        height: 40px;
        margin-top: 20px;
        background-color: rgba(0, 0, 0, 0.671);
        border-radius: 18px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 3px 5px;
      }

      input {
        border: none;
        background-color: rgba(0, 0, 0, 0);
        width: 450px;
        color: #99ffcc;
        font-size: 24px;
      }

      button {
        background-color: #99ffcc;
        border-radius: 10px;
        margin: 5px;
        padding: 5px 10px;
        color: rgba(58, 57, 57, 0.945);
        border: none;
        height: 30px;
        font-size: 15px;
      }

      input:focus {
        outline: none;
      }

      .list {
        background-color: rgba(0, 0, 0, 0.671);
        border-radius: 16px;
        width: 600px;
        height: 50px;
        margin: auto;
        padding: 0px 5px;
        margin-top: 7px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .task {
        display: flex;
        flex-direction: column;
      }
      .content {
        font-size: 22px;
        font-family: sans-serif;
        color: whitesmoke;
      }
    </style>
  </head>

  <body>
    <div class="main">
      <div class="input-box">
        <input type="text" placeholder="task" />
        <button onclick="addTask()">Add</button>
      </div>
      <div class="task"></div>
    </div>
    <script>
      let todos = [];
      function TodoTask(task) {
        this.task = task;
        this.status = false;
      }

      let input = document.querySelector("input");
      let taskList = document.querySelector(".task");

      function addTask() {
        let task = input.value;
        if (!task) {
          return;
        }
        let todo = new TodoTask(task);
        todos.push(todo);
        console.log(todo);
        input.value = "";
        renderTodo();
      }
      function removeContent(task) {
        return function() {
          todos = todos.filter(function (el, i) {
           if (task !== i) {
             return el;
           }
          })
           renderTodo()
        }
      }
      
      function doneTodo(task) {
        return function() {
          todos = todos.map(function (el, i) {
            if (i === task) {
             el.status = !el.status;
          }
          return el;
          })
          renderTodo()
        }
      }
      function renderTodo() {
        taskList.innerHTML = "";
        todos.forEach((el, i) => {
          const todoDiv = document.createElement("div");
          todoDiv.setAttribute("class", "list");

          const todoContent = document.createElement("p");
          todoContent.setAttribute("class", "content");
          if (el.status) {
             todoContent.style.textDecoration = 'line-through';
          }
          todoContent.textContent = el.task;

          const doneBtn = document.createElement("button");
          doneBtn.textContent = "Done";
          doneBtn.addEventListener('click', doneTodo(i))

          const removeBtn = document.createElement("button");
          removeBtn.textContent = "Remove";
          removeBtn.addEventListener("click", removeContent(i));

          const buttonsDiv = document.createElement("div");
          buttonsDiv.appendChild(doneBtn);
          buttonsDiv.appendChild(removeBtn);

          todoDiv.appendChild(todoContent);
          todoDiv.appendChild(buttonsDiv);

          taskList.appendChild(todoDiv);
        });
      }
      renderTodo();
    </script>
  </body>
</html>
